/*! openkarotz-js v0.2.1 | (c) 2013 Olivier Bagot | opensource.org/licenses/MIT
 * http://github.com/hobbe/openkarotz-js
 */
var OpenKarotz=function(l){if(l===undefined){console.log("variable karotz_ip is required!");throw new Error("variable karotz_ip is required!");}this.ip=l;this.state={"sleep":1,"version":"unknown","karotz_free_space":"unknown"};var m="http://"+l+"/cgi-bin";var n=m+'/status';var o=m+'/sleep';var p=m+'/wakeup';var q=m+'/reboot';var r=m+'/sound';var s=m+'/sound_control';var t=m+'/leds';var u=m+'/ears';var v=m+'/ears_reset';var w=m+'/ears_random';var x=m+'/moods';var y=m+'/tts';this.status=function(c,d){console.log('status: '+n);var e=this;$.get(n,function(a){console.log("status: "+a);if(a){var b=JSON.parse(a);e.state=b;console.log(e.state);if(c){c()}}else{e.state.sleep=1;if(d){d()}}})};this.sleep=function(c,d){var e=this;$.get(o,function(a){console.log("sleep: "+a);var b=JSON.parse(a);if(b.return==0){e.state.sleep=1;if(c){c()}}else{if(d){d(b.msg)}}})};this.wakeup=function(c,d){var e=this;$.get(p+"?silent=1",function(a){console.log("wakeup: "+a);var b=JSON.parse(a);if(b.return==0){e.state.sleep=0;if(c){c()}}else{if(d){d(b.msg)}}})};this.reboot=function(c,d){$.get(q,function(a){console.log("reboot: "+a);var b=JSON.parse(a);if(b.return==0){if(c){c()}}else{if(d){d(b.msg)}}})};this.sound=function(c,d,e){$.get(r+"?url="+c,function(a){console.log("sound: "+a);var b=JSON.parse(a);if(b.return==0){if(d){d()}}else{if(e){e(b.msg)}}})};this.soundInternal=function(c,d,e){$.get(r+"?id="+c,function(a){console.log("sound id "+c+": "+a);var b=JSON.parse(a);if(b.return==0){if(d){d()}}else{if(e){e(b.msg)}}})};this.soundControl=function(c,d,e){$.get(s+"?cmd="+c,function(a){console.log("sound_control("+c+"): "+a);var b=JSON.parse(a);if(b.return==0){if(d){d()}}else{if(e){e(b.msg)}}})};this.soundControlPause=function(a,b){this.soundControl("pause",a,b)};this.soundControlQuit=function(a,b){this.soundControl("quit",a,b)};this.leds=function(c,d,e,f){var g="?";if(d){g+="pulse="+d+"&"}$.get(t+g+"color="+c,function(a){console.log("leds: "+a);var b=JSON.parse(a);if(b.return==0){if(e){e()}}else{if(f){f(b.msg)}}})};this.ledsPulse=function(a,b,c){this.leds(a,1,b,c)};this.ledsFixed=function(a,b,c){this.leds(a,0,b,c)};this.ears=function(c,d,e,f){$.get(u+"?left="+c+"&right="+d,function(a){console.log("ears: "+a);var b=JSON.parse(a);if(b.return==0){if(e){e()}}else{if(f){f(b.msg)}}})};this.earsReset=function(c,d){$.get(v,function(a){console.log("ears_reset: "+a);var b=JSON.parse(a);if(b.return==0){if(c){c()}}else{if(d){d(b.msg)}}})};this.earsRandom=function(c,d){$.get(w,function(a){console.log("ears_random: "+a);var b=JSON.parse(a);if(b.return==0){if(c){c(b.left,b.right)}}else{if(d){d(b.msg)}}})};this.moods=function(c,d,e){var f="";if(c){f+="?id="+c}$.get(x+f,function(a){console.log("moods: "+a);var b=JSON.parse(a);if(b.return==0){if(d){d()}}else{if(e){e(b.msg)}}})};this.tts=function(c,d,e,f,g){var h='?text="Bonjour"';if(c){h='?text="'+encodeURIComponent(c)+'"'}var i="&voice=margaux";if(d){i="&voice="+d}var j="&nocache=1";if(e){j="&nocache="+e}var k=y+h+i+j;console.log("tts: "+k);$.get(k,function(a){console.log("tts: "+a);var b=JSON.parse(a);if(b.return==0){if(f){f()}}else{if(g){g(b.msg)}}})};return this};
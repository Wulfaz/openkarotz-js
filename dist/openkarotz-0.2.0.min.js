/*! openkarotz-js v0.2.0 | (c) 2013 Olivier Bagot | opensource.org/licenses/MIT
 * http://github.com/hobbe/openkarotz-js
 */
var OpenKarotz=function(e){if(e===undefined){console.log("variable karotz_ip is required!");throw new Error("variable karotz_ip is required!")}this.ip=e;var t=new Array;var n="http://"+e+"/cgi-bin";var r=n+"/status";var i=n+"/sleep";var s=n+"/wakeup";var o=n+"/reboot";var u=n+"/sound";var a=n+"/sound_control";var f=n+"/leds";var l=n+"/ears";var c=n+"/ears_reset";var h=n+"/ears_random";var p=n+"/moods";var d=n+"/tts";this.status=function(e,n){console.log("status: "+r);$.get(r,function(r){console.log("status: "+r);if(r){var i=JSON.parse(r);t=i;if(e){e()}}else{t.sleep=1;if(n){n()}}})};this.sleep=function(e,n){$.get(i,function(r){console.log("sleep: "+r);var i=JSON.parse(r);if(i.return==0){t.sleep=1;if(e){e()}}else{if(n){n(i.msg)}}})};this.wakeup=function(e,n){$.get(s+"?silent=1",function(r){console.log("wakeup: "+r);var i=JSON.parse(r);if(i.return==0){t.sleep=0;if(e){e()}}else{if(n){n(i.msg)}}})};this.reboot=function(e,t){$.get(o,function(n){console.log("reboot: "+n);var r=JSON.parse(n);if(r.return==0){if(e){e()}}else{if(t){t(r.msg)}}})};this.sound=function(e,t,n){$.get(u+"?url="+e,function(e){console.log("sound: "+e);var r=JSON.parse(e);if(r.return==0){if(t){t()}}else{if(n){n(r.msg)}}})};this.soundInternal=function(e,t,n){$.get(u+"?id="+e,function(r){console.log("sound id "+e+": "+r);var i=JSON.parse(r);if(i.return==0){if(t){t()}}else{if(n){n(i.msg)}}})};this.soundControl=function(e,t,n){$.get(a+"?cmd="+e,function(r){console.log("sound_control("+e+": "+r);var i=JSON.parse(r);if(i.return==0){if(t){t()}}else{if(n){n(i.msg)}}})};this.soundControlPause=function(e,t){soundControl("pause",e,t)};this.soundControlQuit=function(e,t){soundControl("quit",e,t)};this.leds=function(e,t,n,r){var i="?";if(t){i+="pulse="+t+"&"}$.get(f+i+"color="+e,function(e){console.log("leds: "+e);var t=JSON.parse(e);if(t.return==0){if(n){n()}}else{if(r){r(t.msg)}}})};this.ledsPulse=function(e,t,n){leds(e,1,t,n)};this.ledsFixed=function(e,t,n){leds(e,0,t,n)};this.ears=function(e,t,n,r){$.get(l+"?left="+e+"&right="+t,function(e){console.log("ears: "+e);var t=JSON.parse(e);if(t.return==0){if(n){n()}}else{if(r){r(t.msg)}}})};this.earsReset=function(e,t){$.get(c,function(n){console.log("ears_reset: "+n);var r=JSON.parse(n);if(r.return==0){if(e){e()}}else{if(t){t(r.msg)}}})};this.earsRandom=function(e,t){$.get(h,function(n){console.log("ears_random: "+n);var r=JSON.parse(n);if(r.return==0){if(e){e(r.left,r.right)}}else{if(t){t(r.msg)}}})};this.moods=function(e,t,n){var r="";if(e){r+="?id="+e}$.get(p+r,function(e){console.log("moods: "+e);var r=JSON.parse(e);if(r.return==0){if(t){t()}}else{if(n){n(r.msg)}}})};this.tts=function(e,t,n,r,i){var s='?text="Bonjour"';if(e){s='?text="'+encodeURIComponent(e)+'"'}var o="&voice=margaux";if(t){o="&voice="+t}var u="&nocache=1";if(n){u="&nocache="+n}var a=d+s+o+u;console.log("tts: "+a);$.get(a,function(e){console.log("tts: "+e);var t=JSON.parse(e);if(t.return==0){if(r){r()}}else{if(i){i(t.msg)}}})};return this}